<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<style>
    table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

table {
  background: linear-gradient(135deg, #e6ffe6, #ccffcc, #b3ffb3);
  border: 1px solid #fcb69f;
  border-collapse: collapse;
  width: 100%;
  box-shadow: 2px 2px 10px rgba(144, 238, 144, 0.3);
  border-radius: 8px;
}

th, td {
  text-align: left;
  padding-top: 20px;
  padding-bottom: 20px;
  padding-left: 30px;
  padding-right: 40px;
  font-size: 20px;
  color: #064d1f; /* Dark green text */
}

.button1 {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 12px 24px;
  font-size: 16px;
  border-radius: 10px;
  box-shadow: 0 0 10px #4CAF50, 0 0 20px #66bb6a;
  cursor: pointer;
  transition: 0.3s ease-in-out;
}

.button1:hover {
  background-color: #66bb6a;
  box-shadow: 0 0 15px #66bb6a, 0 0 30px #81c784;
}


.error {
  color: #cc0000;
}

</style>
<script>
let obj_array = JSON.parse(localStorage.getItem("userData")) || [];
document.addEventListener("DOMContentLoaded", function() {
  renderTable(obj_array);
});


function instantiateObject(name, age, height, weight) {
  return {
    Name: name,
    Age: age,
    Height: height,
    Weight: weight
  };
}

function addToArray(obj) {
  obj_array.push(obj);
  localStorage.setItem("userData", JSON.stringify(obj_array));
  return obj_array;
}

function renderTable(dataArray) {
  let tableHTML = `<table class="table" border="1">
      <tr><th>Name</th><th>Age</th><th>Height</th><th>Weight</th></tr>`;

  dataArray.forEach(function (obj) {
    tableHTML +=
      "<tr>" +
      "<td>" + obj.Name + "</td>" +
      "<td>" + obj.Age + "</td>" +
      "<td>" + obj.Height + "</td>" +
      "<td>" + obj.Weight + "</td>" +
      "</tr>";
  });

  tableHTML += `</table>`;
  document.getElementById("result").innerHTML = tableHTML;
}


function handleSubmit(event) {
  event.preventDefault();

  const name = document.getElementById("name").value.trim();
  const age = document.getElementById("age1").value.trim();
  const height = document.getElementById("height").value.trim();
  const weight = document.getElementById("weight").value.trim();
  const email = document.getElementById("mail").value.trim();

  const person = instantiateObject(name, age, height, weight);
  const updatedArray = addToArray(person);
  renderTable(updatedArray);

  const user = { name, email, age, height, weight };
  fetch('https://crudcrud.com/api/afbe867028ed4a78aeabef256a2c4da9/users', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(user)
  })
    .then(res => res.json())
    .then(data => {
      console.log('Saved on server:', data);
    })
    .catch(err => console.error('Error:', err));

  document.getElementById("form1").reset();
}

function reset() {
  document.getElementById("form1").reset();
  document.getElementById("summary").innerText = "";
}

fetch("https://crudcrud.com/api/afbe867028ed4a78aeabef256a2c4da9/users")
  .then(res => res.json())
  .then(data => {
    console.log("All users from server:", data);
  })
  .catch(err => console.error("Error:", err));
</script>

</head>
<body>
 <div>
        <h1 style="text-align: center;"> Muscle Magic</h1>
       <center>
        <form id="form1" onsubmit="handleSubmit(event)">
        <table id="offertable" border="1px solid" style=" border-collapse: collapse;">
        <tr ><th colspan="2" style="text-align: center;">Sign Up</th>
        <tr><th>Name</th>
        <td><input type= "text" placeholder=" Enter your full name:" id="name" required pattern="[A-Za-z0-9 ]+"><br> <span id="namelo" class="error" style="text-decoration-color: red; display: none;">Name field cannot be empty</span></td></tr>
        <tr><th>E-mail:</th>
        <td><input type="email" id="mail" name="mail1" placeholder="Enter your e-mail id:" required> <br> <span id="maillo" class="error" style="text-decoration-color: red;display: none; ">E-mail field cannot be empty.</span></td></tr>
        <tr><th>Age</th>
        <td><input type= "number" placeholder="Enter your age:" id="age1"  required  ><br><span id="agelo" class="error" style="text-decoration-color: red;display: none;">Age field cannot be empty.</span><span id="ageloc" class="error" style="text-decoration-color: red;display: none;">Password should be more than 5 characters long.</span></td></tr>
        <tr><th>Weight</th>
        <td><input type= "number" placeholder="Enter your weight:" id="weight"  required  ><br><span id="weightlo" class="error" style="text-decoration-color: red;display: none;">Weight field cannot be empty. </span></td></tr>
        <tr><th>Height</th>
        <td><input type= "number" placeholder="Enter your height:" id="height"  required  ><br><span id="heightlo" class="error" style="text-decoration-color: red;display: none;">Height field cannot be empty. </span></td></tr>

    </table><br>
        <button id="sub2" class="button1" type="submit" >Sign up</button>
        <button id="summary" class="button1" type="button" >Reset</button>
        </form></center>

    </div><br><br>
    <div id="result"></div>   
</body>
</html>